{% extends 'base.html.twig' %}

{% block title "Tous les articles"%}


{% block body %}
	<div class="row justify-content-center">
		<div class="col-xs-12">
			<h1 class="display-4 text-center my-4">
				Mes réalisations
			</h1>

			{% if app.user %}
				<div class="button new_post_btn">
					<a class="btn btn-primary" href="{{ path('post_new') }}">Nouvel article</a>
				</div>
			{% endif %}

			<div class="posts container">
				<div class="row justify-content-center">
					{% for post in posts %}
						<div class="col-xs-12 col-xl-6">
							<div class="card one_post">
								<a href="{{ path( 'post_show', { id: post.id } ) }}">
									<img class="card-img-top" src="{{ '/img/' ~ post.pictures.first.name|default('../img/default-image.png') }}" alt="Une image de l'article ">
								</a>
								<div class="card-body">
									<h4 class="card-title text-center">
										<a href="{{ path( 'post_show', { id: post.id } ) }}">{{post.title}}</a>
									</h4>
									<div class=" row mx-auto">
										<p class="card-text col">
											{{post.description|u.truncate(30)}}
										</p>

										{% if app.user %}
											<div class="buttons col">
												<a href="{{ path('post_update', { id: post.id }) }}" class="p-1">
													<i class="fas fa-pencil-alt"></i>
												</a>
												<a href="{{ path('post_desactivate', { id: post.id }) }}" onclick="return confirm('Êtes-vous certain de vouloir désactiver cet article ?')" class="p-1" data-delete>
													<i class="fas fa-trash-alt"></i>
												</a>
											</div>
										{% endif %}
									</div>

								</div>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>

{% endblock %}
